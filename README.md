æˆ‘æœ‰ä¸ªä¸»æ„â˜ï¸ğŸ¤“

ç”¨Cè¯­è¨€ä¸ä¾èµ–Cåº“å¤´æ–‡ä»¶å¼€å‘ä¸€ä¸ªæ–°è¯­è¨€ï¼ˆæˆ–è€…å«ç¼–è¯‘å™¨ï¼‰

èƒ½ä¸èƒ½å®ç°è¿˜æ˜¯ä¸ªé—®é¢˜

åæ§½ï¼šä»£ç å†™çš„çœŸçƒ‚ ä»€ä¹ˆæ—¶å€™é‡æ„ä¸€ä¸‹ğŸ˜…



### ç›®å‰è¿›åº¦ğŸ¥´

- [x] è¯æ³•åˆ†æ
- [x] è¯­æ³•åˆ†æ
- [x] è¯­ä¹‰åˆ†æ
- [x] ä»£ç ç”Ÿæˆ

**è¯æ³•åˆ†æ**å®Œæˆï¼Œå®ç°`lexer`å‡½æ•°

**è¯­æ³•åˆ†æ**å®Œæˆï¼Œå®ç°`parser`å‡½æ•°

**è¯­ä¹‰åˆ†æ**å®Œæˆ

**æ±‡ç¼–ä»£ç ç”Ÿæˆ**å®Œæˆï¼Œ**æœ‰ç‚¹å°bug**ğŸ«£

`source code` ---`lexer`---> `tokens`---`parser`--->`AST`

`AST`---`semantic_analysis`--->`symbols`--->`asm`				



### ç›®æ ‡

å®ç°ä¸€ä¸ªç¼–è¯‘å™¨ï¼Œç¼–è¯‘ä¸€ä¸ªè§„åˆ™ç”±è‡ªå·±åˆ¶å®šçš„è¯­è¨€

æ”¯æŒ`int`ç±»å‹çš„**åŠ å‡ä¹˜é™¤**

æ”¯æŒ`for`ï¼Œ`while`å¾ªç¯

æ”¯æŒ`if`ï¼Œ`else`

æ”¯æŒå‡½æ•°



### ç›®å‰è¯­è¨€ç‰¹æ€§

å…³é”®å­— ï¼š

1. `func` å®šä¹‰å‡½æ•°
2. `var` å®šä¹‰å˜é‡ ï¼ˆå¯ä»¥çœç•¥ï¼‰
3. è°ƒç”¨å‡½æ•°ï¼Œä½†**ä¸æ”¯æŒ**è°ƒç”¨å‡½æ•°çš„å‚æ•°æ˜¯è°ƒç”¨å‡½æ•°æ¯”å¦‚`add(a, mul(b, c))`
4. `return` å‡½æ•°è¿”å›å€¼

æ ‡ç‚¹ç¬¦å·ï¼š

1. `+`ï¼Œ`-`ï¼Œ`*`ï¼Œ`/` å››åˆ™è¿ç®—
2. `(`ï¼Œ`)` æ”¹å˜è¿ç®—ä¼˜å…ˆçº§
3. `;` æ¯æ¡è¯­å¥ç»“æŸåå¿…é¡»åŠ ä¸Šè¿™ä¸ª

> è‡ªç„¶æ•°æ˜¯å¦‚æ­¤çš„ç¾ä¸½ï¼Œæ‰€ä»¥è¯·ä¸è¦åœ¨ä»£ç ä¸­å®šä¹‰`a = -1`æˆ–`a = 1.2`ä¹‹ç±»çš„æ•°å­—
>
> ä¹Ÿä¸è¦è®©è¿™äº›è¡¨è¾¾å¼çš„è®¡ç®—çš„ç»“æœä¸ºè´Ÿæ•°æˆ–å°æ•°
>
> ç»å¯¹ä¸æ˜¯æˆ‘æ‡’å¾—å®ç°å¯¹è´Ÿæ•°å’Œå°æ•°çš„åˆ¤æ–­ï¼Œåªå› è‡ªç„¶æ•°å¤ªç¾ä¸½äº†

**æœ€åç¼–è¯‘ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ä¼šæ‰“å°`main`å‡½æ•°è¿”å›çš„å€¼**



### ç¼–è¯‘

è¿›å…¥`src`ç›®å½•

```shell
$ cd src
$ make
```

è¿™æ—¶ä¼šåœ¨`language/bin`ä¸‹ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶`main`

åœ¨`language/bin`ä¸‹æ–°å»º`main.txt`æ–‡ä»¶å¹¶è¾“å…¥

æ­£ç¡®ä»£ç  å¯ä»¥é€šè¿‡**è¯­ä¹‰åˆ†æ**

```c
func add(a, b)
{
    return a + b;
}

func sub(a, b)
{
    return a - b;
}

func mul(a, b)
{
    return a * b;
}

func div(a, b)
{
    return a / b;
}

func f(a)
{
    b = a * a;
    return div(b, a);
}

func main()
{
    a = (add(1, 2) + mul(3, 4)) * (sub(6, 1) - div(8, 2));
    b = f(a);
    b = b + 1;
    return b;
}

```

ç„¶åæ‰§è¡Œå‘½ä»¤

```shell
$ cd ../bin
$ ./compiler main.txt
```

å°±å¯ä»¥çœ‹åˆ°ç»ˆç«¯è¾“å‡º`tokens`ï¼Œ`AST_expr`ï¼Œ`symbols`

ä¸”ä¼šåœ¨å½“å‰ç›®å½•ç”Ÿæˆ`main.s`çš„æ±‡ç¼–æ–‡ä»¶å’Œ`main`å¯æ‰§è¡Œæ–‡ä»¶

```sh
$ ./main
```

ç»ˆç«¯ä¼šè¾“å‡º`main`å‡½æ•°çš„è¿”å›å€¼

å¦‚æœå‘ç°æ²¡æœ‰è¾“å‡º ç¨‹åºæŠ¥é”™ è¯·ä¸è¦æƒŠè®¶ å¾ˆæ­£å¸¸çš„å˜› äººç”Ÿå“ªæœ‰ä¸€å¸†é£é¡ºğŸ¤¤
